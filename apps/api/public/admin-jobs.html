<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Jobs - VERGO Admin</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/vergo-styles.css">
  <link rel="stylesheet" href="/vergo-a11y.css">
  <link rel="stylesheet" href="/vergo-mobile.css">

  <link rel="stylesheet" href="/pages/css/admin-jobs.css">
  <link rel="stylesheet" href="/vergo-platform.css">
</head>
<body class="platform">
  <header></header>
  <div class="admin-header">
    <a href="index" class="logo">
      <img src="/logo.png" alt="VERGO Ltd" loading="lazy" decoding="async">
    </a>
    <div class="header-nav">
      <a href="admin">Roster</a>
      <a href="admin-jobs" class="active">Jobs</a>
      <a href="admin-job-applications">Applications</a>
      <a href="admin-clients">Clients</a>
      <a href="index">View Site</a>
      <button type="button" class="btn btn-secondary btn-small" data-action="logout">Logout</button>
    </div>
  </div>
  
  <main>
    <div id="alert-container"></div>
    
    <!-- Pending jobs banner -->
    <div id="pending-banner" class="pending-banner hidden">
      <div class="pending-banner-text">
        <span>⚠️</span>
        <strong><span id="pending-count">0</span> job(s) awaiting approval</strong>
      </div>
      <button type="button" class="btn btn-small" data-action="filter-pending">Review Now</button>
    </div>
    
    <div class="page-header">
      <h1>Manage Jobs</h1>
      <button type="button" class="btn btn-primary" data-action="open-create-modal">+ Add Job</button>
    </div>
    
    <div class="filters">
      <select id="filter-status">
        <option value="">All Statuses</option>
        <option value="PENDING">⚠️ Pending Approval</option>
        <option value="DRAFT">Draft</option>
        <option value="OPEN">Open</option>
        <option value="FILLED">Filled</option>
        <option value="CLOSED">Closed</option>
      </select>
      <select id="filter-type">
        <option value="">All Types</option>
        <option value="INTERNAL">VERGO Jobs</option>
        <option value="EXTERNAL">External Jobs</option>
      </select>
    </div>
    
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Job</th>
            <th>Company</th>
            <th>Date</th>
            <th class="hide-mobile">Pay</th>
            <th class="hide-mobile">Apps</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="jobs-table">
          <tr><td colspan="7" class="loading">Loading jobs...</td></tr>
        </tbody>
      </table>
    </div>
  </main>
  
  <!-- Create/Edit Modal -->
  <div id="job-modal" class="modal-backdrop d-none">
    <div class="modal">
      <div class="modal-header">
        <h2 id="modal-title">Add New Job</h2>
        <button class="modal-close" type="button" data-action="close-modal">&times;</button>
      </div>
      <form id="job-form">
        <div class="modal-body">
          <div id="form-alert"></div>
          
          <div class="form-row">
            <div class="form-group full-width">
              <label>Job Title *</label>
              <input type="text" name="title" required placeholder="e.g. Bartender - Corporate Event">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Role *</label>
              <select name="roleId" required id="role-select">
                <option value="">Select role...</option>
              </select>
            </div>
            <div class="form-group">
              <label>Type *</label>
              <select name="type" required>
                <option value="EXTERNAL">External (Other Company)</option>
                <option value="INTERNAL">Internal (VERGO)</option>
              </select>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Company Name</label>
              <input type="text" name="companyName" placeholder="e.g. ABC Events Ltd">
            </div>
            <div class="form-group">
              <label>Location *</label>
              <input type="text" name="location" required placeholder="e.g. Central London">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Venue</label>
              <input type="text" name="venue" placeholder="e.g. The Dorchester Hotel">
            </div>
            <div class="form-group">
              <label>Event Date</label>
              <input type="date" name="eventDate">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Shift Start</label>
              <input type="time" name="shiftStart">
            </div>
            <div class="form-group">
              <label>Shift End</label>
              <input type="time" name="shiftEnd">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Pay Rate (£)</label>
              <input type="number" name="payRate" step="0.01" min="0" max="1000" placeholder="15.00">
            </div>
            <div class="form-group">
              <label>Pay Type</label>
              <select name="payType">
                <option value="HOURLY">Per Hour</option>
                <option value="DAILY">Per Day</option>
                <option value="FIXED">Fixed Fee</option>
              </select>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Staff Needed</label>
              <input type="number" name="staffNeeded" min="1" value="1">
            </div>
            <div class="form-group">
              <label>Status *</label>
              <select name="status" required>
                <option value="DRAFT">Draft (hidden)</option>
                <option value="OPEN">Open (visible)</option>
                <option value="FILLED">Filled</option>
                <option value="CLOSED">Closed</option>
              </select>
            </div>
          </div>
          
          <div class="form-group full-width">
            <label>Description *</label>
            <textarea name="description" required rows="4" placeholder="Describe the job, duties, what to expect..."></textarea>
          </div>
          
          <div class="form-group full-width">
            <label>Requirements</label>
            <textarea name="requirements" rows="3" placeholder="Experience needed, certifications, dress code..."></textarea>
          </div>
          
          <div class="form-group">
            <label>Application Deadline</label>
            <input type="date" name="closingDate">
          </div>
        </div>
        
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-action="close-modal">Cancel</button>
          <button type="submit" class="btn btn-primary" id="save-btn">Save Job</button>
        </div>
      </form>
    </div>
  </div>
  
  <script src="/js/admin-core.js"></script>

  <script src="/pages/js/admin-jobs.js"></script>
  <footer></footer>
  <script src="/vergo-nav.js"></script>
  <script src="/vergo-footer.js"></script>
</body>
</html>
